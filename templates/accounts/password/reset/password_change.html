{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="center-card">
    <div class="card auth-card">
        <h1 class="card__title">Смена пароля</h1>

        {% if messages %}
            <div class="messages">
            {% for m in messages %}
                <div class="alert {% if m.tags %}alert-{{ m.tags }}{% endif %}">{{ m }}</div>
            {% endfor %}
            </div>
        {% endif %}
        
        <p class="muted">
            Чтобы изменить пароль, введите текущий пароль и новый пароль.
        </p>
        
        <form method="post">
            {% csrf_token %}
            
            <div class="field">
                <label for="id_old_password" class="form-label">Текущий пароль</label>
                {{ form.old_password }}
            </div>
            
            <div class="field">
                <label for="id_new_password1" class="form-label">Новый пароль</label>
                {{ form.new_password1 }}
                <small class="muted">
                    Минимум 8 символов, хотя бы одна заглавная буква и цифра
                </small>
            </div>
            
            <div class="field">
                <label for="id_new_password2" class="form-label">Подтверждение пароля</label>
                {{ form.new_password2 }}
            </div>
            
            <div class="field" style="margin-top: 24px;">
                <button type="submit" class="btn btn-primary w-100">
                    <i class="bi bi-key-fill"></i> Изменить пароль
                </button>
            </div>
            
            <div style="display: flex; gap: 10px; margin-top: 16px;">
                <a href="{% url 'password_reset_request' %}" class="btn btn-link w-100">
                    Забыли пароль?
                </a>
                <a href="{% url 'profile' %}" class="btn btn-outline-secondary w-100">
                    Отмена
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}