{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="center-card">
    <div class="card auth-card">
        <div class="card__header bg-danger text-white" style="border-radius: 18px 18px 0 0; padding: 20px; margin: -28px -28px 20px -28px;">
            <h1 class="mb-0"><i class="bi bi-trash-fill"></i> Подтверждение удаления</h1>
        </div>
        
        <div class="consequences-box" style="background: linear-gradient(135deg, rgba(220, 53, 69, 0.15), rgba(220, 53, 69, 0.08)); border-left: 4px solid #dc3545; padding: 16px; border-radius: 8px; margin-bottom: 20px;">
            <h5 style="color: #dc3545; font-weight: 700; margin-bottom: 12px; display: flex; align-items: center; gap: 8px;">
                <i class="bi bi-exclamation-triangle-fill"></i> 
                Финальное подтверждение удаления
            </h5>
            
            <p style="color: #fff; margin-bottom: 10px; font-weight: 500;">
                Вы собираетесь удалить аккаунт <strong style="color: #ffcccc;">{{ user.username }}</strong>. 
                Это последний шаг перед безвозвратным удалением:
            </p>
            
            <ul style="color: #ffcccc; padding-left: 20px; margin-bottom: 0;">
                <li style="margin-bottom: 6px; padding-left: 4px;">Все ваши данные будут <strong>безвозвратно удалены</strong></li>
                <li style="margin-bottom: 6px; padding-left: 4px;">История просмотров и избранное будут <strong>очищены</strong></li>
                <li style="margin-bottom: 6px; padding-left: 4px;">Вы потеряете доступ ко всем <strong>покупкам и подпискам</strong></li>
                <li style="margin-bottom: 6px; padding-left: 4px;"><strong>Деньги за покупки не возвращаются</strong></li>
                <li style="padding-left: 4px;"><strong>Восстановление аккаунта невозможно</strong></li>
            </ul>
        </div>
        
        <div class="alert alert-warning" style="border-left: 4px solid #ffc107;">
            <div style="display: flex; align-items: flex-start; gap: 10px;">
                <i class="bi bi-shield-exclamation" style="color: #ffc107; font-size: 18px;"></i>
                <div>
                    <strong style="color: #ffc107;">Последний шаг:</strong><br>
                    Для окончательного удаления введите пароль и подтверждающее слово.
                </div>
            </div>
        </div>
        
        <form method="post" style="margin-top: 24px;">
            {% csrf_token %}
            
            <div class="field">
                <label for="confirm_text" class="form-label" style="color: #fff; font-weight: 600; margin-bottom: 8px;">
                    <i class="bi bi-key"></i> Подтверждающее слово
                </label>
                <input type="text" 
                       class="form-control" 
                       id="confirm_text" 
                       name="confirm_text" 
                       placeholder="УДАЛИТЬ"
                       required
                       style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(220, 53, 69, 0.4); color: #fff; text-align: center; font-weight: bold; letter-spacing: 2px;">
                <small style="color: #9aa0a6; display: block; margin-top: 6px; text-align: center;">
                    Введите слово <strong>УДАЛИТЬ</strong> заглавными буквами
                </small>
            </div>
            
            <div class="field" style="margin-top: 20px;">
                <label for="password" class="form-label" style="color: #fff; font-weight: 600; margin-bottom: 8px;">
                    <i class="bi bi-shield-lock"></i> Ваш пароль для подтверждения
                </label>
                <input type="password" 
                       class="form-control" 
                       id="password" 
                       name="password" 
                       required
                       placeholder="Введите ваш пароль"
                       style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(220, 53, 69, 0.4); color: #fff;">
            </div>
            
            <div class="field" style="margin-top: 28px;">
                <button type="submit" class="btn btn-danger w-100" style="padding: 14px; font-weight: 700; font-size: 16px;">
                    <i class="bi bi-trash-fill"></i> Удалить аккаунт навсегда
                </button>
            </div>
            
            <div class="text-center" style="margin: 20px 0 10px;">
                <a href="{% url 'profile' %}" class="btn btn-outline-secondary w-100" style="padding: 12px; border-color: #6c757d;">
                    <i class="bi bi-x-circle"></i> Отмена
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}