{% extends 'employees/base.html' %}

{% block title %}–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å - –ö–∏–Ω–æ–í–µ—á–µ—Ä{% endblock %}

{% block content %}
<div class="page-header">
    <h1>üëë –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
    <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π –∏ –æ–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</p>
</div>

{% csrf_token %}

<div class="stats-grid">
    <div class="stat-card">
        <h3>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</h3>
        <div class="stat-value">{{ total_users }}</div>
        <div class="stat-desc">–í—Å–µ–≥–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ</div>
    </div>
    
    <div class="stat-card">
        <h3>–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏</h3>
        <div class="stat-value">{{ active_subscriptions }}</div>
        <div class="stat-desc">–î–µ–π—Å—Ç–≤—É—é—â–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏</div>
    </div>
    
    <div class="stat-card">
        <h3>–û–±—â–∞—è –≤—ã—Ä—É—á–∫–∞</h3>
        <div class="stat-value">{{ total_revenue|floatformat:2 }} ‚ÇΩ</div>
        <div class="stat-desc">–í—Å–µ–≥–æ –æ–ø–ª–∞—á–µ–Ω–æ</div>
    </div>
</div>

<div class="content-box">
    <h2>üì∫ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px;">
        <a href="{% url 'admin_content_list' %}" style="
            display: block;
            background: #667eea;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s;
            border: 2px solid #4c51bf;
        ">
            üé¨ –í–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç
            <div class="stat-desc" style="font-size: 12px; opacity: 0.8;">–§–∏–ª—å–º—ã –∏ —Å–µ—Ä–∏–∞–ª—ã</div>
        </a>
        
        <a href="{% url 'admin_content_add' %}" style="
            display: block;
            background: #48bb78;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s;
            border: 2px solid #38a169;
        ">
            ‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç
            <div class="stat-desc" style="font-size: 12px; opacity: 0.8;">–ù–æ–≤—ã–π —Ñ–∏–ª—å–º/—Å–µ—Ä–∏–∞–ª</div>
        </a>

        <a href="{% url 'admin_seasons_management' %}" style="
            display: block;
            background: #e53e3e;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s;
        ">
            üì∫ –°–µ–∑–æ–Ω—ã –∏ —ç–ø–∏–∑–æ–¥—ã
            <div class="stat-desc" style="font-size: 12px; opacity: 0.8;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–∏–∞–ª–∞–º–∏</div>
        </a>
        
        <a href="{% url 'admin_genres' %}" style="
            display: block;
            background: #ed8936;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s;
            border: 2px solid #dd6b20;
        ">
            üè∑Ô∏è –ñ–∞–Ω—Ä—ã
            <div class="stat-desc" style="font-size: 12px; opacity: 0.8;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∞–Ω—Ä–∞–º–∏</div>
        </a>
        
        <a href="{% url 'admin_media_assets' %}" style="
            display: block;
            background: #9f7aea;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s;
            border: 2px solid #805ad5;
        ">
            üìÅ –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã
            <div class="stat-desc" style="font-size: 12px; opacity: 0.8;">–í–∏–¥–µ–æ, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
        </a>
    </div>

    <div style="
        background: #f7fafc;
        padding: 15px;
        border-radius: 8px;
        margin: 20px 0;
        border: 1px solid #e2e8f0;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
    ">
        <div style="text-align: center;">
            <div style="font-size: 24px; font-weight: bold; color: #4a5568;">{{ total_content }}</div>
            <div style="font-size: 14px; color: #718096;">–í—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</div>
        </div>
        <div style="text-align: center;">
            <div style="font-size: 24px; font-weight: bold; color: #4a5568;">{{ total_movies }}</div>
            <div style="font-size: 14px; color: #718096;">–§–∏–ª—å–º—ã</div>
        </div>
        <div style="text-align: center;">
            <div style="font-size: 24px; font-weight: bold; color: #4a5568;">{{ total_series }}</div>
            <div style="font-size: 14px; color: #718096;">–°–µ—Ä–∏–∞–ª—ã</div>
        </div>
        <div style="text-align: center;">
            <div style="font-size: 24px; font-weight: bold; color: #4a5568;">{{ total_free_content }}</div>
            <div style="font-size: 14px; color: #718096;">–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π</div>
        </div>
    </div>
</div>

<div class="content-box">
    <h2>‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
        
        <a href="{% url 'admin_subscriptions' %}" target="_blank" style="
            display: block;
            background: #48bb78;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s;
            border: 2px solid #38a169;
        ">
            üí∞ –ü–æ–¥–ø–∏—Å–∫–∏ –∏ –ø–ª–∞—Ç–µ–∂–∏
        </a>

        <a href="{% url 'admin_user_purchases' %}" style="
            display: block;
            background: #ed8936;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s;
            border: 2px solid #dd6b20;
        ">
            üõí –ü–æ–∫—É–ø–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        </a>
        
        <a href="{% url 'admin_user_subscriptions' %}" target="_blank" style="
            display: block;
            background: #9f7aea;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s;
            border: 2px solid #805ad5;
        ">
            üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
        </a>
        
        <a href="{% url 'admin_payments' %}" target="_blank" style="
            display: block;
            background: #667eea;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s;
            border: 2px solid #4c51bf;
        ">
            üí≥ –ü–ª–∞—Ç–µ–∂–∏
        </a>
        
    </div>
</div>

<div class="content-box">
    <h2>üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px;">
        <a href="{% url 'admin_users_list' %}" style="
            display: block;
            background: #4299e1;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s;
            border: 2px solid #3182ce;
        ">
            üë• –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
            <div class="stat-desc" style="font-size: 12px; opacity: 0.8;">–ü—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
        </a>
        
        <a href="{% url 'admin_user_create' %}" style="
            display: block;
            background: #48bb78;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s;
            border: 2px solid #38a169;
        ">
            ‚ûï –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            <div class="stat-desc" style="font-size: 12px; opacity: 0.8;">–ù–æ–≤–∞—è —É—á–µ—Ç–Ω–∞—è –∑–∞–ø–∏—Å—å</div>
        </a>
        
        <a href="{% url 'admin_employees_list' %}" style="
            display: block;
            background: #805ad5;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s;
            border: 2px solid #6b46c1;
        ">
            üë®‚Äçüíº –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏
            <div class="stat-desc" style="font-size: 12px; opacity: 0.8;">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º</div>
        </a>
        
        <a href="{% url 'admin_employee_create' %}" style="
            display: block;
            background: #ed8936;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            text-decoration: none;
            transition: transform 0.2s;
            border: 2px solid #dd6b20;
        ">
            ‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
            <div class="stat-desc" style="font-size: 12px; opacity: 0.8;">–ù–æ–≤—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ</div>
        </a>
    </div>
</div>

<div class="content-box">
    <h2>üìä –ù–µ–¥–∞–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç</h2>
    {% if recent_content %}
    <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
        <thead>
            <tr style="background: #f7fafc; border-bottom: 2px solid #e2e8f0;">
                <th style="padding: 12px; text-align: left;">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th style="padding: 12px; text-align: left;">–¢–∏–ø</th>
                <th style="padding: 12px; text-align: left;">–ì–æ–¥</th>
                <th style="padding: 12px; text-align: left;">–¶–µ–Ω–∞</th>
                <th style="padding: 12px; text-align: left;">–î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è</th>
                <th style="padding: 12px; text-align: left;">–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for content in recent_content %}
            <tr style="border-bottom: 1px solid #e2e8f0;">
                <td style="padding: 12px;">
                    <strong>{{ content.title }}</strong>
                </td>
                <td style="padding: 12px;">
                    {% if content.type == 'movie' %}
                    <span style="background: #4299e1; color: white; padding: 2px 8px; border-radius: 4px; font-size: 12px;">–§–∏–ª—å–º</span>
                    {% else %}
                    <span style="background: #ed8936; color: white; padding: 2px 8px; border-radius: 4px; font-size: 12px;">–°–µ—Ä–∏–∞–ª</span>
                    {% endif %}
                </td>
                <td style="padding: 12px;">{{ content.release_year }}</td>
                <td style="padding: 12px;">
                    {% if content.is_free %}
                    <span style="color: #48bb78; font-weight: bold;">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
                    {% else %}
                    {{ content.price }} ‚ÇΩ
                    {% endif %}
                </td>
                <td style="padding: 12px;">{{ content.created_at|date:"d.m.Y H:i" }}</td>
                <td style="padding: 12px;">
                    {% if content.id %}
                    <a href="{% url 'admin_content_edit' content.id %}" style="
                        background: #4c51bf; 
                        color: white; 
                        padding: 4px 12px; 
                        border-radius: 4px; 
                        text-decoration: none;
                        font-size: 12px;
                        display: inline-block;
                        margin-right: 5px;
                    ">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <a href="{% url 'admin_content_delete' content.id %}" style="
                        background: #e53e3e; 
                        color: white; 
                        padding: 4px 12px; 
                        border-radius: 4px; 
                        text-decoration: none;
                        font-size: 12px;
                        display: inline-block;
                    " onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç?')">–£–¥–∞–ª–∏—Ç—å</a>
                    {% else %}
                    <span style="color: #718096; font-size: 12px;">ID –Ω–µ –Ω–∞–π–¥–µ–Ω</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="text-align: center; color: #718096; padding: 20px;">–ù–µ—Ç –Ω–µ–¥–∞–≤–Ω–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</p>
    {% endif %}
    <div style="text-align: center; margin-top: 15px;">
        <a href="{% url 'admin_content_list' %}" style="color: #4299e1; text-decoration: none;">–°–º–æ—Ç—Ä–µ—Ç—å –≤–µ—Å—å –∫–æ–Ω—Ç–µ–Ω—Ç ‚Üí</a>
    </div>
</div>

<style>
.stat-card {
    background: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    transition: transform 0.2s;
}
.stat-card:hover {
    transform: translateY(-2px);
}
.stat-value {
    font-size: 32px;
    font-weight: bold;
    margin: 10px 0;
}
.stat-desc {
    color: #718096;
    font-size: 14px;
}
.content-box {
    background: white;
    border-radius: 8px;
    padding: 25px;
    margin: 25px 0;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.page-header {
    margin-bottom: 30px;
}
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin: 25px 0;
}
a:hover {
    transform: translateY(-2px);
}
</style>
{% endblock %}