{% extends 'employees/admin/admin_base.html' %}

{% block title %}–°–µ–∑–æ–Ω—ã –∏ —ç–ø–∏–∑–æ–¥—ã - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º{% endblock %}
{% block page_title %}üì∫ –°–µ–∑–æ–Ω—ã –∏ —ç–ø–∏–∑–æ–¥—ã{% endblock %}

{% block content %}
<div class="content-box">
    <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–∏–∞–ª</h2>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
        {% for series in series_list %}
        <div style="border: 1px solid #e2e8f0; border-radius: 8px; padding: 15px; 
                    {% if series_id == series.0 %}border-color: #4299e1; background: #ebf8ff;{% endif %}">
            <h3 style="margin-top: 0;">{{ series.1 }}</h3>
            <p style="color: #718096; margin-bottom: 15px;">–ì–æ–¥: {{ series.2 }}</p>
            <div style="display: flex; gap: 10px;">
                <a href="{% url 'admin_seasons_management' %}?series_id={{ series.0 }}" 
                   class="btn {% if series_id == series.0 %}active{% endif %}" 
                   style="font-size: 12px;">üìã –°–µ–∑–æ–Ω—ã</a>
                <a href="{% url 'admin_season_add' series.0 %}" class="btn" style="font-size: 12px;">‚ûï –°–µ–∑–æ–Ω</a>
            </div>
        </div>
        {% endfor %}
    </div>
    
    {% if selected_series %}
    <div class="content-box" style="margin-top: 20px;">
        <h2>–°–µ–∑–æ–Ω—ã —Å–µ—Ä–∏–∞–ª–∞: {{ selected_series.1 }}</h2>
        
        {% if messages %}
        <div class="alert alert-info">
            {% for message in messages %}
            {{ message }}
            {% endfor %}
        </div>
        {% endif %}
        
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <p style="color: #718096;">{{ selected_series.3|truncatechars:200 }}</p>
            <a href="{% url 'admin_season_add' selected_series.0 %}" class="btn btn-success">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∑–æ–Ω</a>
        </div>
        
        {% if seasons %}
        <table>
            <thead>
                <tr>
                    <th>–°–µ–∑–æ–Ω</th>
                    <th>–≠–ø–∏–∑–æ–¥–æ–≤</th>
                    <th>–ü–µ—Ä–∏–æ–¥</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for season in seasons %}
                <tr>
                    <td>
                        <strong>–°–µ–∑–æ–Ω {{ season.1 }}</strong>
                    </td>
                    <td>
                        {{ season.2 }} —ç–ø–∏–∑–æ–¥–æ–≤
                    </td>
                    <td>
                        {% if season.2 > 0 %}
                        <span class="badge" style="background: #48bb78;">{{ season.2 }} —ç–ø–∏–∑–æ–¥–æ–≤</span>
                        {% else %}
                        <span style="color: #a0aec0;">–ù–µ—Ç —ç–ø–∏–∑–æ–¥–æ–≤</span>
                        {% endif %}
                    </td>
                    <td class="actions">
                        <a href="{% url 'admin_season_detail' season.0 %}" class="btn" style="padding: 4px 8px; font-size: 12px;">üì∫ –≠–ø–∏–∑–æ–¥—ã</a>
                        <a href="{% url 'admin_episode_add' season.0 %}" class="btn" style="background: #48bb78; padding: 4px 8px; font-size: 12px;">‚ûï –≠–ø–∏–∑–æ–¥</a>
                        <form method="post" action="{% url 'admin_season_delete' season.0 %}" style="display: inline;">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger" 
                                    style="padding: 4px 8px; font-size: 12px;"
                                    onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —Å–µ–∑–æ–Ω {{ season.1 }}? –í—Å–µ —ç–ø–∏–∑–æ–¥—ã –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã!')">
                                üóëÔ∏è
                            </button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div style="text-align: center; padding: 40px; color: #718096;">
            <p>–£ —ç—Ç–æ–≥–æ —Å–µ—Ä–∏–∞–ª–∞ –µ—â–µ –Ω–µ—Ç —Å–µ–∑–æ–Ω–æ–≤</p>
            <a href="{% url 'admin_season_add' selected_series.0 %}" class="btn btn-success" style="margin-top: 15px;">–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–π —Å–µ–∑–æ–Ω</a>
        </div>
        {% endif %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 40px; color: #718096;">
        <p>–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–∏–∞–ª –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–∑–æ–Ω–∞–º–∏</p>
        {% if not series_list %}
        <p>–ù–µ—Ç —Å–µ—Ä–∏–∞–ª–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ–∑–æ–Ω–∞–º–∏</p>
        <a href="{% url 'admin_content_add' %}" class="btn btn-success" style="margin-top: 15px;">–î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–∏–∞–ª</a>
        {% endif %}
    </div>
    {% endif %}
</div>
{% endblock %}