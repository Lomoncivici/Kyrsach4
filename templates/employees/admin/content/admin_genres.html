{% extends 'employees/admin/admin_base.html' %}

{% block title %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∞–Ω—Ä–∞–º–∏ - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º{% endblock %}
{% block page_title %}üè∑Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∂–∞–Ω—Ä–∞–º–∏{% endblock %}

{% block content %}
<div class="content-box">
    <h2>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∂–∞–Ω—Ä</h2>

    {% if message %}
    <div class="alert alert-info">
        {{ message }}
    </div>
    {% endif %}
    
    <form method="post" style="max-width: 400px;">
        {% csrf_token %}
        <input type="hidden" name="action" value="add">
        <div class="form-group">
            <label for="genre_name">–ù–∞–∑–≤–∞–Ω–∏–µ –∂–∞–Ω—Ä–∞</label>
            <input type="text" id="genre_name" name="genre_name" required placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ö–æ–º–µ–¥–∏—è">
        </div>
        <button type="submit" class="btn btn-success">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∂–∞–Ω—Ä</button>
    </form>
</div>

<div class="content-box">
    <h2>–°–ø–∏—Å–æ–∫ –∂–∞–Ω—Ä–æ–≤</h2>
    
    {% if genres %}
    <table>
        <thead>
            <tr>
                <th>–ñ–∞–Ω—Ä</th>
                <th>–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for genre in genres %}
            <tr>
                <td>{{ genre.1 }}</td>
                <td>
                    {% for stat in genre_stats %}
                        {% if stat.0 == genre.1 %}
                            {{ stat.1 }} –∫–æ–Ω—Ç–µ–Ω—Ç–æ–≤
                        {% endif %}
                    {% endfor %}
                </td>
                <td class="actions">
                    <form method="post" style="display: inline;">
                        {% csrf_token %}
                        <input type="hidden" name="action" value="delete">
                        <input type="hidden" name="genre_id" value="{{ genre.0 }}">
                        <button type="submit" class="btn btn-danger" style="padding: 4px 8px; font-size: 12px;" 
                                onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∂–∞–Ω—Ä ¬´{{ genre.1 }}¬ª?')">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="color: #718096; text-align: center; padding: 20px;">–ñ–∞–Ω—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
    {% endif %}
</div>

<div class="content-box">
    <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∂–∞–Ω—Ä–∞–º</h2>
    {% if genre_stats %}
    <table>
        <thead>
            <tr>
                <th>–ñ–∞–Ω—Ä</th>
                <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π</th>
            </tr>
        </thead>
        <tbody>
            {% for stat in genre_stats %}
            <tr>
                <td>{{ stat.0 }}</td>
                <td>{{ stat.1 }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p style="color: #718096; text-align: center; padding: 20px;">–ù–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∂–∞–Ω—Ä–∞–º</p>
    {% endif %}
</div>
{% endblock %}