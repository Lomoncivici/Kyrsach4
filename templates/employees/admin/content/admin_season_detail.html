{% extends 'employees/admin/admin_base.html' %}

{% block title %}–°–µ–∑–æ–Ω {{ season_num }} - {{ series_title }}{% endblock %}
{% block page_title %}üì∫ –°–µ–∑–æ–Ω {{ season_num }}: {{ series_title }}{% endblock %}

{% block content %}
<div class="content-box">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2 style="margin: 0;">–≠–ø–∏–∑–æ–¥—ã —Å–µ–∑–æ–Ω–∞ {{ season_num }}</h2>
        <div style="display: flex; gap: 10px;">
            <a href="{% url 'admin_episode_add' season_id %}" class="btn btn-success">‚ûï –î–æ–±–∞–≤–∏—Ç—å —ç–ø–∏–∑–æ–¥</a>
            <a href="{% url 'admin_seasons_management' %}?series_id={{ series_id }}" 
               class="btn" style="background: #a0aec0;">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–µ–∑–æ–Ω–∞–º</a>
        </div>
    </div>
    
    {% if messages %}
    <div class="alert alert-info">
        {% for message in messages %}
        {{ message }}
        {% endfor %}
    </div>
    {% endif %}
    
    {% if episodes %}
    <table>
        <thead>
            <tr>
                <th>–≠–ø–∏–∑–æ–¥</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
                <th>–í–∏–¥–µ–æ</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for episode in episodes %}
            <tr>
                <td style="font-weight: bold;">{{ episode.1 }}</td>
                <td>
                    <strong>{{ episode.2 }}</strong>
                </td>
                <td>
                    {% if episode.3 %}
                    {{ episode.3|truncatechars:60 }}
                    {% else %}
                    <span style="color: #a0aec0;">‚Äî</span>
                    {% endif %}
                </td>
                <td>
                    {% if episode.4 %}
                    {{ episode.4|divisibleby:60|yesno:"—á.,–º–∏–Ω." }}
                    {% else %}
                    <span style="color: #a0aec0;">‚Äî</span>
                    {% endif %}
                </td>
                <td>
                    {% if episode.5 %}
                    <span class="badge" style="background: #48bb78;">–ï—Å—Ç—å</span>
                    {% else %}
                    <span class="badge" style="background: #e53e3e;">–ù–µ—Ç</span>
                    {% endif %}
                </td>
                <td class="actions">
                    <a href="{% url 'admin_episode_edit' episode.0 %}" class="btn" style="padding: 4px 8px; font-size: 12px;">‚úèÔ∏è</a>
                    <form method="post" action="{% url 'admin_episode_delete' episode.0 %}" style="display: inline;">
                        {% csrf_token %}
                        <input type="hidden" name="next" value="{% url 'admin_season_detail' season_id %}">
                        <button type="submit" class="btn btn-danger" 
                                style="padding: 4px 8px; font-size: 12px;"
                                onclick="return confirm('–£–¥–∞–ª–∏—Ç—å —ç–ø–∏–∑–æ–¥ ¬´{{ episode.2 }}¬ª?')">
                            üóëÔ∏è
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div style="text-align: center; padding: 40px; color: #718096;">
        <p>–í —ç—Ç–æ–º —Å–µ–∑–æ–Ω–µ –µ—â–µ –Ω–µ—Ç —ç–ø–∏–∑–æ–¥–æ–≤</p>
        <a href="{% url 'admin_episode_add' season_id %}" class="btn btn-success" style="margin-top: 15px;">–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—ã–π —ç–ø–∏–∑–æ–¥</a>
    </div>
    {% endif %}
</div>
{% endblock %}